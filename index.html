<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bullish Thesis: Home Depot (HD) Earnings</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0"></script>
    <script src="https://cdn.plot.ly/plotly-2.32.0.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Chosen Palette: Vibrant & Trustworthy (Light Grey BG, White Cards, Blue/Orange accents) -->
    <!-- Application Structure Plan: A single-scroll narrative infographic. It flows from (1) The Problem: HD's underperformance vs. SPY, to (2) The Macro Catalyst: The housing market shift, (3) The Historical Precedent: Strong earnings history, (4) The Contrarian Signal: Recent option flow, and finally (5) The Actionable Trade. This linear story is the most persuasive way to build a case for an investor. -->
    <!-- Visualization & Content Choices: 1. HD vs SPY -> Goal: Compare -> Viz: Line Chart (Chart.js). 2. Housing Catalyst -> Goal: Inform/Compare -> Viz: Two Bar Charts (Chart.js), New & Existing Sales. -> Justification: Shows a broad recovery. August New Sales spiked, and Sept Existing Sales ticked up. 3. Earnings History -> Goal: Compare -> Viz: Bar Chart (Chart.js). 4. Option Flow -> Goal: Relationship -> Viz: Heatmaps (Plotly.js). 5. Trade Idea -> Goal: Inform -> Viz: HTML Card. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        'brand-spy': '#3B82F6', // Blue
                        'brand-hd': '#F97316',  // Orange
                        'brand-call': '#16A34A', // Green
                        'brand-put': '#DC2626',   // Red
                        'card-bg': '#FFFFFF',
                        'page-bg': '#F3F4F6',
                        'text-header': '#111827',
                        'text-body': '#374151',
                    }
                }
            }
        }
    </script>
    <style>
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 400px;
            max-height: 50vh;
        }

        @media (min-width: 768px) {
            .chart-container {
                height: 450px;
            }
        }
    </style>
</head>

<body class="bg-page-bg font-sans">

    <div class="container max-w-5xl mx-auto p-4 md:p-8">

        <header class="text-center mb-8 md:mb-12">
            <h1 class="text-3xl md:text-5xl font-bold text-text-header mb-2">A Bullish Case for Home Depot (HD)</h1>
            <p class="text-xl md:text-2xl font-light text-brand-hd">Pre-Earnings Tactical Opportunity</p>
        </header>

        <main class="space-y-8">

            <section class="bg-card-bg rounded-lg shadow-lg p-6 md:p-8">
                <h2 class="text-2xl md:text-3xl font-bold text-text-header mb-4">
                    1. The Setup: A Lagger Ready to Leap
                </h2>
                <p class="text-base md:text-lg text-text-body mb-6">
                    This year, Home Depot has significantly underperformed the S&P 500. While the broader market
                    rallied, HD remained flat to down, creating a valuation gap and a prime opportunity for a "catch-up"
                    trade as it heads into a historically strong event.
                </p>
                <div class="chart-container">
                    <canvas id="spyVsHdChart"></canvas>
                </div>
            </section>

            <section class="bg-card-bg rounded-lg shadow-lg p-6 md:p-8">
                <h2 class="text-2xl md:text-3xl font-bold text-text-header mb-4">
                    2. The Macro Catalyst: A Housing Rebound
                </h2>
                <p class="text-base md:text-lg text-text-body mb-6">
                    The primary headwind for HD—a slumping housing market—appears to be easing. While Sep data for *new*
                    home sales is pending, the last report (Aug) showed a massive spike. More recently, the Sep data for
                    *existing* home sales also shows an uptick, supporting the idea that a broad market recovery is
                    beginning.
                </p>
                <div class="chart-container" style="height: 400px;">
                    <canvas id="housingMarketChart"></canvas>
                    <p class="text-center text-sm text-text-body mt-2">New (Blue, Left Axis) vs. Existing (Orange, Right
                        Axis) Home Sales</p>
                </div>
            </section>

            <section class="bg-card-bg rounded-lg shadow-lg p-6 md:p-8">
                <h2 class="text-2xl md:text-3xl font-bold text-text-header mb-4">
                    3. The Precedent: A History of Earnings Beats
                </h2>
                <p class="text-base md:text-lg text-text-body mb-6">
                    Home Depot has a strong track record of beating earnings estimates and drifting higher
                    post-announcement. Based on the past several quarters, the stock has shown a consistent positive
                    reaction, with the notable exception of May's report. We expect this pattern to continue.
                </p>
                <div class="chart-container" style="height: 300px;">
                    <canvas id="earningsChart"></canvas>
                </div>
            </section>

            <section class="bg-card-bg rounded-lg shadow-lg p-6 md:p-8">
                <h2 class="text-2xl md:text-3xl font-bold text-text-header mb-4">
                    4. The Contrarian Signal: Sentiment Has Bottomed
                </h2>
                <p class="text-base md:text-lg text-text-body mb-6">
                    Recent price weakness can be attributed to negative sentiment in the options market. As the stock
                    price (blue line) fell, call volume (left) was quiet all week, with the exception of Nov 5th & 10th.
                    In contrast, put volume (right) was extremely heavy and concentrated at lower strikes ($355 &
                    $362.5), suggesting heavy bearish positioning and potential capitulation.
                </p>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="chart-container">
                        <div id="callVolumeHeatmap" class="w-full h-full"></div>
                        <p class="text-center text-sm text-text-body mt-2">Call Volume Heatmap (by Strike)</p>
                    </div>
                    <div class="chart-container">
                        <div id="putVolumeHeatmap" class="w-full h-full"></div>
                        <p class="text-center text-sm text-text-body mt-2">Put Volume Heatmap (by Strike)</p>
                    </div>
                </div>
            </section>

            <section class="bg-brand-hd rounded-lg shadow-xl p-6 md:p-8 text-center text-white">
                <h2 class="text-3xl md:text-4xl font-bold mb-4">
                    The Trade Recommendation
                </h2>
                <p class="text-lg md:text-xl mb-6">
                    Given the macro tailwind, historical earnings strength, and contrarian sentiment, we believe the
                    stock has bottomed. We recommend buying call spreads to position for a post-earnings rally.
                </p>
                <div class="bg-white text-text-header rounded-lg p-6 max-w-md mx-auto">
                    <div class="text-lg font-semibold text-text-body">Buy Call Spread</div>
                    <div class="text-4xl font-bold text-brand-hd my-2">365 / 390</div>
                    <div class="text-lg font-semibold text-text-body">Expiry: 11/28/25</div>
                </div>
            </section>

        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            function wrapLabel(label) {
                const maxLen = 16;
                if (label.length <= maxLen) return label;
                const words = label.split(' ');
                const lines = [];
                let currentLine = '';
                words.forEach(word => {
                    if ((currentLine + ' ' + word).trim().length > maxLen) {
                        lines.push(currentLine.trim());
                        currentLine = word;
                    } else {
                        currentLine = (currentLine + ' ' + word).trim();
                    }
                });
                lines.push(currentLine.trim());
                return lines;
            }

            function tooltipTitleCallback(tooltipItems) {
                const item = tooltipItems[0];
                let label = item.chart.data.labels[item.dataIndex];
                if (Array.isArray(label)) {
                    return label.join(' ');
                } else {
                    return label;
                }
            }

            const defaultChartOptions = {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        labels: { color: '#374151' }
                    },
                    tooltip: {
                        callbacks: { title: tooltipTitleCallback }
                    }
                },
                scales: {
                    y: {
                        ticks: { color: '#374151' },
                        grid: { color: '#E5E7EB' }
                    },
                    x: {
                        ticks: { color: '#374151' },
                        grid: { display: false }
                    }
                },
                interaction: {
                    mode: 'index',
                    intersect: false,
                },
            };

            // 1. HD vs SPY Chart (from vs_SPY.png)
            const spyVsHdCtx = document.getElementById('spyVsHdChart').getContext('2d');
            const dates = [
                '2024-11-15', '2024-12-15', '2025-01-15', '2025-02-15', '2025-03-15', '2025-04-15',
                '2025-05-15', '2025-06-15', '2025-07-15', '2025-08-15', '2025-09-15', '2025-10-15', '2025-11-14'
            ];
            const spyData = [100, 102, 103, 101, 100, 92, 98, 102, 105, 110, 114, 112, 116];
            const hdData = [100, 101.5, 99, 97, 94, 88, 90, 92, 91, 100, 98, 93, 91];

            // Re-creating the chart based on the image's data
            new Chart(spyVsHdCtx, {
                type: 'line',
                data: {
                    labels: dates,
                    datasets: [
                        {
                            label: 'SPY',
                            data: spyData,
                            borderColor: '#3B82F6',
                            backgroundColor: 'transparent',
                            tension: 0.1,
                            pointRadius: 0,
                        },
                        {
                            label: 'HD',
                            data: hdData,
                            borderColor: '#F97316',
                            backgroundColor: 'transparent',
                            tension: 0.1,
                            pointRadius: 0,
                        }
                    ]
                },
                options: {
                    ...defaultChartOptions,
                    scales: {
                        y: {
                            ...defaultChartOptions.scales.y,
                            title: { display: true, text: 'Normalized Price (start=100)', color: '#374151' }
                        },
                        x: {
                            ...defaultChartOptions.scales.x,
                            type: 'time',
                            time: { unit: 'month' },
                        }
                    },
                    plugins: {
                        ...defaultChartOptions.plugins,
                        tooltip: {
                            ...defaultChartOptions.plugins.tooltip,
                            callbacks: {
                                title: (tooltipItems) => {
                                    const date = new Date(tooltipItems[0].parsed.x);
                                    return date.toLocaleDateString(undefined, { year: 'numeric', month: 'short' });
                                }
                            }
                        }
                    }
                }
            });

            // 2. Combined Home Sales Chart (from new_home_sales.png and existing_home_sales.png)
            const housingMarketCtx = document.getElementById('housingMarketChart').getContext('2d');
            const housingDates = ['Oct 24', 'Nov 24', 'Dec 24', 'Jan 25', 'Feb 25', 'Mar 25', 'Apr 25', 'May 25', 'Jun 25', 'Jul 25', 'Aug 25', 'Sep 25'];
            const newSalesData = [680, 650, 670, 680, 660, 620, 640, 680, 660, 650, 780, null]; // Aug is last data point
            const existingSalesData = [4040, 4140, 4280, 4090, 4260, 4030, 4010, 4050, 3960, 4020, 4015, 4060]; // Sep is last data point

            new Chart(housingMarketCtx, {
                type: 'bar',
                data: {
                    labels: housingDates,
                    datasets: [
                        {
                            label: 'New Home Sales (Thousands)',
                            data: newSalesData,
                            backgroundColor: '#3B82F6',
                            borderColor: '#3B82F6',
                            yAxisID: 'y',
                        },
                        {
                            label: 'Existing Home Sales (Thousands)',
                            data: existingSalesData,
                            type: 'bar',
                            backgroundColor: '#F97316',
                            borderColor: '#F97316',
                            yAxisID: 'y1',
                        }
                    ]
                },
                options: {
                    ...defaultChartOptions,
                    scales: {
                        y: {
                            ...defaultChartOptions.scales.y,
                            type: 'linear',
                            position: 'left',
                            title: { display: true, text: 'New Sales (Thousands)', color: '#3B82F6' },
                            min: 600 // Adjust axis to start near data minimum
                        },
                        y1: {
                            type: 'linear',
                            position: 'right',
                            title: { display: true, text: 'Existing Sales (Thousands)', color: '#F97316' },
                            ticks: { color: '#F97316' },
                            grid: { display: false }, // Hide grid lines for the second axis
                            min: 3900 // Adjust axis to start near data minimum
                        },
                        x: { ...defaultChartOptions.scales.x }
                    }
                }
            });

            // 3. Earnings Chart (from earnings_reaction_timeshots.png)
            const earningsCtx = document.getElementById('earningsChart').getContext('2d');
            new Chart(earningsCtx, {
                type: 'bar',
                data: {
                    labels: ['20-Feb-24', '14-May-24', '13-Aug-24', '12-Nov-24', '25-Feb-25', '20-May-25', '19-Aug-25'],
                    datasets: [{
                        label: 'Post-Earnings Move (T+1 16:00)',
                        data: [-0.3, 1.8, 2.5, 0.5, 2.8, -2.0, 1.2],
                        backgroundColor: (context) => context.raw >= 0 ? '#16A34A' : '#DC2626',
                    }]
                },
                options: {
                    ...defaultChartOptions,
                    plugins: {
                        ...defaultChartOptions.plugins,
                        legend: { display: false }
                    },
                    scales: {
                        y: { ...defaultChartOptions.scales.y, title: { display: true, text: 'Percentage Move (%)', color: '#374151' } },
                        x: { ...defaultChartOptions.scales.x }
                    }
                }
            });

            // 4. Options Chart - REPLACED with Plotly Heatmaps
            const heatmapDates = ['2025-11-05', '2025-11-06', '2025-11-07', '2025-11-10', '2025-11-11', '2025-11-12', '2025-11-13', '2025-11-14'];
            const heatmapStrikes = [355, 362.5, 377.5, 385, 390, 392.5];
            const priceData = [378, 370, 370, 372, 374, 370, 368, 365];

            // Create 2D arrays for heatmap data, mapping strikes to indices
            const strikeMap = new Map(heatmapStrikes.map((strike, i) => [strike, i]));
            const zCall = Array(heatmapStrikes.length).fill(0).map(() => Array(heatmapDates.length).fill(0));
            const zPut = Array(heatmapStrikes.length).fill(0).map(() => Array(heatmapDates.length).fill(0));

            // Populate Call Data
            zCall[strikeMap.get(392.5)][0] = 400; // Nov 5
            zCall[strikeMap.get(377.5)][1] = 200; // Nov 6
            zCall[strikeMap.get(385.0)][2] = 200; // Nov 7
            zCall[strikeMap.get(390.0)][3] = 350; // Nov 10

            // Populate Put Data
            zPut[strikeMap.get(355.0)][3] = 250; // Nov 10
            zPut[strikeMap.get(355.0)][4] = 250; // Nov 11
            zPut[strikeMap.get(362.5)][5] = 200; // Nov 12
            zPut[strikeMap.get(362.5)][7] = 200; // Nov 14

            const baseLayout = {
                autosize: true,
                margin: { l: 50, r: 50, b: 50, t: 50, pad: 4 },
                font: { family: 'Inter, sans-serif' },
                xaxis: { type: 'category' },
                yaxis: { title: 'Strike Price ($)', autorange: true },
                yaxis2: {
                    title: 'HD Price ($)',
                    overlaying: 'y',
                    side: 'right',
                    autorange: true,
                    showgrid: false,
                    color: '#3B82F6'
                },
                legend: { x: 0, y: 1.1, orientation: 'h' }
            };

            const plotConfig = { responsive: true, displayModeBar: false };

            // Create Call Heatmap
            const callData = [
                {
                    z: zCall,
                    x: heatmapDates.map(d => d.substring(5)), // Shorten date labels
                    y: heatmapStrikes,
                    type: 'heatmap',
                    colorscale: [
                        [0, '#F3F4F6'], // page-bg for zero
                        [1, '#16A34A']  // brand-call
                    ],
                    showscale: false,
                    name: 'Call Volume',
                    hoverinfo: 'x+y+z'
                },
                {
                    x: heatmapDates.map(d => d.substring(5)),
                    y: priceData,
                    type: 'scatter',
                    mode: 'lines',
                    line: { color: '#3B82F6' },
                    yaxis: 'y2',
                    name: 'HD Price',
                    hoverinfo: 'x+y'
                }
            ];
            const callLayout = { ...baseLayout, title: 'Call Volume' };
            Plotly.newPlot('callVolumeHeatmap', callData, callLayout, plotConfig);

            // Create Put Heatmap
            const putData = [
                {
                    z: zPut,
                    x: heatmapDates.map(d => d.substring(5)),
                    y: heatmapStrikes,
                    type: 'heatmap',
                    colorscale: [
                        [0, '#F3F4F6'], // page-bg for zero
                        [1, '#DC2626']  // brand-put
                    ],
                    showscale: false,
                    name: 'Put Volume',
                    hoverinfo: 'x+y+z'
                },
                {
                    x: heatmapDates.map(d => d.substring(5)),
                    y: priceData,
                    type: 'scatter',
                    mode: 'lines',
                    line: { color: '#3B82F6' },
                    yaxis: 'y2',
                    name: 'HD Price',
                    hoverinfo: 'x+y'
                }
            ];
            const putLayout = { ...baseLayout, title: 'Put Volume' };
            Plotly.newPlot('putVolumeHeatmap', putData, putLayout, plotConfig);

        });
    </script>
</body>

</html>